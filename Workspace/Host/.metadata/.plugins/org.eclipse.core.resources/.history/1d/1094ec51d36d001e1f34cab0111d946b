/*
 * structBitFields.c
 *
 *  Created on: Oct 18, 2023
 *      Author: mariestahaab
 */

#include <stdint.h>
#include <stdio.h>

typedef struct{
	uint8_t		crc			;
	uint8_t		status		;
	uint16_t	payload		;
	uint8_t		bat			;
	uint8_t		sensor		;
	uint8_t		longAddr	;
	uint8_t		shortAddr	;
	uint8_t		addrMode	;
} Packet_t;

int main(void){

	uint32_t testPacketValue = 0x03FF1234;

	Packet_t Packet;
	Packet_t *pPacket = &Packet;

	pPacket -> crc 			= (uint8_t ) ((testPacketValue >> 0 ) & (0x3	));
	pPacket -> status 		= (uint8_t ) ((testPacketValue >> 2 ) & (0x1	));
	pPacket -> payload 		= (uint16_t) ((testPacketValue >> 3 ) & (0xFFF	));
	pPacket -> bat 			= (uint8_t ) ((testPacketValue >> 15) & (0x7	));
	pPacket -> sensor 		= (uint8_t ) ((testPacketValue >> 18) & (0x7	));
	pPacket -> longAddr 	= (uint8_t ) ((testPacketValue >> 21) & (0xFF	));
	pPacket -> shortAddr 	= (uint8_t ) ((testPacketValue >> 29) & (0x3	));
	pPacket -> addrMode 	= (uint8_t ) ((testPacketValue >> 31) & (0x1	));

	return 0;
}
